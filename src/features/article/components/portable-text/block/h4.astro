---
import { Link } from 'lucide-react';

import { ScrollLink } from '@/components/ui/scroll-link';
import {
  extractTextFromChildren,
  generateId,
} from '@/features/article/utils/toc';

const { node } = Astro.props;

const text = extractTextFromChildren(node?.children || []);
const id = generateId(text);
---

<h4
  id={id}
  class="group text-foreground mt-[1.5em] mb-[0.5em] flex scroll-m-28 flex-row items-center gap-2 leading-[1.5] font-bold"
>
  <ScrollLink targetId={id} client:visible><slot /></ScrollLink>
  <Link
    className="text-muted-foreground size-3.5 shrink-0 opacity-0 transition-opacity group-hover:opacity-100"
  />
</h4>
