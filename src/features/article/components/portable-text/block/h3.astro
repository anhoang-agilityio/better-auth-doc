---
import { Link } from 'lucide-react';

import { ScrollLink } from '@/components/ui/scroll-link';
import {
  extractTextFromChildren,
  generateId,
} from '@/features/article/utils/toc';

const { node } = Astro.props;

const text = extractTextFromChildren(node?.children || []);
const id = generateId(text);
---

<h3
  id={id}
  class="group text-foreground mt-[1.6em] mb-[0.6em] flex scroll-m-28 flex-row items-center gap-2 text-[1.25em] leading-[1.6] font-bold"
>
  <ScrollLink targetId={id} client:visible><slot /></ScrollLink>
  <Link
    className="text-muted-foreground size-3.5 shrink-0 opacity-0 transition-opacity group-hover:opacity-100"
  />
</h3>
